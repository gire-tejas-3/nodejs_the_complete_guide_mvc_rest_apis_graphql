<!DOCTYPE html>
<html lang="en">
<%- include('includes/head.ejs') %>

<body>
	<div id="app">
		<%- include('includes/sidebar.ejs') %>
		<div id="main">
			<%- include('includes/nav.ejs') %>
			<div class="main-content container-fluid">
				<div class="page-title">
					<div class="row">
						<div class="col-12 col-md-6 order-md-1 order-last">
							<h3>Update Account</h3>
						</div>
						<div class="col-12 col-md-6 order-md-2 order-first">
							<nav aria-label="breadcrumb" class="breadcrumb-header">
								<ol class="breadcrumb">
									<li class="breadcrumb-item">
										<a href="/" class="text-success">Dashboard</a>
									</li>
									<li class="breadcrumb-item active" aria-current="page">
										Update Account
									</li>
								</ol>
							</nav>
						</div>
					</div>
				</div>

				<!-- // Basic multiple Column Form section start -->
				<section id="multiple-column-form">
					<div class="row match-height">
						<div class="col-12">
							<div class="card">
								<div class="card-content">
									<div class="card-body">
										<form class="form" method="post" action="/account" enctype="multipart/form-data">
											<div class="row">
												<% if(accounts.profileImage) { %>
													<div class="col-md-9 col-12">
														<div class="form-group has-icon-left">
															<label for="firstname">Profile Image</label>
															<div class="position-relative">
																<img class="profile"
																	src="/assets/users/<%= accounts.profileImage.filename %>"
																	alt="profile"
																/>
															</div>
														</div>
													</div>
												<% } %> 
												<% if(accounts.resume) { %>
													<div class="col-md-3 col-12">
														<div class="form-group has-icon-left">
															<label for="firstname">Resume</label>
															<div class="position-relative">
																<a class="btn btn-primary resume" download rel="noreferrer" target="_blank" href="/assets/users/<%= accounts.resume.filename %>">
																	View Resume
																</a>
															</div>
														</div>
													</div>
												<% } %> 
												<div class="col-md-4 col-12">
													<div class="form-group has-icon-left">
														<label for="firstname">First Name</label>
														<div class="position-relative">
															<input type="text" class="form-control"
																placeholder="First Name" required
																id="firstname" name="firstname" value="<%= accounts.firstname || '' %>"/>
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-4 col-12">
													<div class="form-group has-icon-left">
														<label for="middlename">Middle Name</label>
														<div class="position-relative">
															<input type="text" class="form-control"
																placeholder="Middle Name" required
																id="middlename" name="middlename" value="<%= accounts.middlename || '' %>" />
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-4 col-12">
													<div class="form-group has-icon-left">
														<label for="lastname">Last Name</label>
														<div class="position-relative">
															<input type="text" class="form-control"
																placeholder="Last Name" id="lastname"
																name="lastname" required value="<%= accounts.lastname || '' %>" />
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-6 col-12">
													<div class="form-group has-icon-left">
														<label for="contact">Contact</label>
														<div class="position-relative">
															<input type="text" class="form-control"
																placeholder="Contact" id="contact"
																name="contact" value="<%= accounts.contact || '' %>"  required/>
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-6 col-12">
													<div class="form-group has-icon-left">
														<label for="email">Email</label>
														<div class="position-relative">
															<input type="email" class="form-control"
																placeholder="Email" id="email"
																name="email" value="<%= accounts.email || '' %>" disabled />
															<div class="form-control-icon">
																<i class="fa fa-envelope"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<label for="username">Username</label>
														<div class="position-relative">
															<input type="text" class="form-control"
																placeholder="Username" id="username"
																name="username" value="<%= accounts.username || '' %>" disabled />
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<label for="password">Password</label>
														<div class="position-relative">
															<input type="password" class="form-control"
																placeholder="Password" name="password"
																id="password" value="<%= accounts.password || '' %>" disabled />
															<div class="form-control-icon">
																<i class="fa fa-key"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<label for="gender">Gender</label>
														<div class="position-relative">
															<fieldset class="form-group">
																<select class="form-select"
																	id="gender" name="gender" required>
																	<option value="male">
																		Male
																	</option>
																	<option value="female">
																		Female
																	</option>
																</select>
															</fieldset>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<label for="role">User
															Category</label>
														<div class="position-relative">
															<fieldset class="form-group">
																<select class="form-select"
																	id="role" name="role" value="<%= accounts.role || '' %>" required>
																	<option value="admin">
																		Admin
																	</option>
																	<option value="user">
																		User
																	</option>
																</select>
															</fieldset>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<label for="dateOfBirth">Date of Birth</label>
														<div class="position-relative">
															<input type="date" class="form-control"
																placeholder="Last Name" id="dateOfBirth"
																name="dateOfBirth" value="<%= accounts.dateOfBirth ? accounts.dateOfBirth.toISOString().split('T')[0]: '' %>" required/>
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<label for="department">Department</label>
														<div class="position-relative">
															<select class="form-control" name="department" id="department" required>
																<% for(let department of departments) { %>
																	<option value="<%= department._id %>" <%=  accounts.department === department._id ? 'selected' : '' %>>
																		<%= department.departmentName %>
																	</option>
																<% } %>
															</select>
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<label for="designation">Designation</label>
														<div class="position-relative">
															<select class="form-control" name="designation" id="designation" required>
																<% for(let designation of designations) { %>
																	<option value="<%= designation._id %>" <%=  accounts.designation === designation._id ? 'selected' : '' %> >
																		<%= designation.designation %>
																	</option>
																<% } %>
															</select>
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<label for="isActive">A/c Status</label>
														<div class="position-relative">
															<select class="form-control" name="isActive" id="isActive" value="<%= accounts.isActive %>" required>
																	<option selected value="true">Active</option>
																	<option value="false">Not Active</option>
															</select>
															<div class="form-control-icon">
																<i class="fa fa-user"></i>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<div class="position-relative">
															<label for="profileImage">Profile Image</label>
															<div class="position-relative">
																<input type="file" class="form-control"
																	id="profileImage" name="profileImage" />
																	<div class="form-control-icon">
																		<i class="fa fa-user"></i>
																	</div>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-3 col-12">
													<div class="form-group has-icon-left">
														<div class="position-relative">
															<label for="resume">Resume</label>
															<div class="position-relative">
																<input type="file" class="form-control"
																	id="resume" name="resume" />
																	<div class="form-control-icon">
																		<i class="fa fa-user"></i>
																	</div>
															</div>
														</div>
													</div>
												</div>
												
												<input type="hidden" name="_csrf" value="<%= csrfToken %>">
												<input type="hidden" name="recaptchaToken" id="recaptchaToken">
												<div class="col-12 d-flex justify-content-end">
													<button type="submit" class="btn btn-primary me-1 mb-1" onclick="onClick(event)">
														Submit
													</button>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<!-- // Basic multiple Column Form section end -->
			</div>
		</div>
	</div>
	<%- include('includes/end.ejs') %>
	<script>
		dateOfBirth.max = new Date().toISOString().split("T")[0];
	</script>
</body>

</html>